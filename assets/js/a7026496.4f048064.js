"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics=globalThis.webpackChunkphysical_ai_humanoid_robotics||[]).push([[5662],{8453:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>a});var r=i(6540);const t={},o=r.createContext(t);function s(n){const e=r.useContext(o);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),r.createElement(o.Provider,{value:e},n.children)}},9256:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"module2/unity-visualization","title":"Unity for Robot Visualization","description":"Introduction to Unity for Robotics","source":"@site/docs/module2/unity-visualization.md","sourceDirName":"module2","slug":"/module2/unity-visualization","permalink":"/Physical-AI-Humanoid-book/docs/module2/unity-visualization","draft":false,"unlisted":false,"editUrl":"https://github.com/user/physical-ai-humanoid-robotics/tree/main/docs/module2/unity-visualization.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Physics and Sensor Simulation","permalink":"/Physical-AI-Humanoid-book/docs/module2/physics-sensor-simulation"},"next":{"title":"URDF and SDF Formats","permalink":"/Physical-AI-Humanoid-book/docs/module2/urdf-sdf-formats"}}');var t=i(4848),o=i(8453);const s={},a="Unity for Robot Visualization",l={},c=[{value:"Introduction to Unity for Robotics",id:"introduction-to-unity-for-robotics",level:2},{value:"Why Unity for Robotics?",id:"why-unity-for-robotics",level:2},{value:"Advantages",id:"advantages",level:3},{value:"Use Cases in Robotics",id:"use-cases-in-robotics",level:3},{value:"Unity Robotics Setup",id:"unity-robotics-setup",level:2},{value:"Installation Requirements",id:"installation-requirements",level:3},{value:"Installing Unity Robotics Tools",id:"installing-unity-robotics-tools",level:3},{value:"Unity ROS Integration",id:"unity-ros-integration",level:2},{value:"ROS-TCP-Connector",id:"ros-tcp-connector",level:3},{value:"Setting Up the Connection",id:"setting-up-the-connection",level:3},{value:"Creating Robot Models in Unity",id:"creating-robot-models-in-unity",level:2},{value:"Importing Robot Models",id:"importing-robot-models",level:3},{value:"Robot Structure in Unity",id:"robot-structure-in-unity",level:3},{value:"Joint Control System",id:"joint-control-system",level:3},{value:"Sensor Simulation in Unity",id:"sensor-simulation-in-unity",level:2},{value:"Camera Sensors",id:"camera-sensors",level:3},{value:"LIDAR Simulation",id:"lidar-simulation",level:3},{value:"Unity Perception Package",id:"unity-perception-package",level:2},{value:"Semantic Segmentation",id:"semantic-segmentation",level:3},{value:"Dataset Generation",id:"dataset-generation",level:3},{value:"Digital Twin Implementation",id:"digital-twin-implementation",level:2},{value:"Real-time Synchronization",id:"real-time-synchronization",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Level of Detail (LOD)",id:"level-of-detail-lod",level:3},{value:"Occlusion Culling",id:"occlusion-culling",level:3},{value:"VR Integration for Teleoperation",id:"vr-integration-for-teleoperation",level:2},{value:"VR Teleoperation Interface",id:"vr-teleoperation-interface",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Scene Organization",id:"1-scene-organization",level:3},{value:"2. Resource Management",id:"2-resource-management",level:3},{value:"3. Network Communication",id:"3-network-communication",level:3},{value:"4. Physics Settings",id:"4-physics-settings",level:3},{value:"Integration Workflow",id:"integration-workflow",level:2},{value:"Development Pipeline",id:"development-pipeline",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"Connection Problems",id:"connection-problems",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Summary",id:"summary",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"unity-for-robot-visualization",children:"Unity for Robot Visualization"})}),"\n",(0,t.jsx)(e.h2,{id:"introduction-to-unity-for-robotics",children:"Introduction to Unity for Robotics"}),"\n",(0,t.jsx)(e.p,{children:"Unity is a powerful 3D development platform that has gained significant traction in robotics for creating high-fidelity visualizations, simulations, and digital twins. While traditionally used for gaming, Unity's real-time rendering capabilities, physics engine, and extensibility make it an excellent choice for robotics applications."}),"\n",(0,t.jsx)(e.h2,{id:"why-unity-for-robotics",children:"Why Unity for Robotics?"}),"\n",(0,t.jsx)(e.h3,{id:"advantages",children:"Advantages"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"High-Quality Rendering"}),": State-of-the-art graphics for photorealistic simulation"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Real-time Performance"}),": Optimized for interactive applications"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Extensive Asset Library"}),": Thousands of 3D models, materials, and environments"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Cross-Platform Support"}),": Deploy to multiple platforms and devices"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Active Community"}),": Large developer community with extensive resources"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Flexible Integration"}),": APIs for connecting with external systems"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"use-cases-in-robotics",children:"Use Cases in Robotics"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"High-fidelity simulation"})," for perception system training"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Digital twin visualization"})," for monitoring real robots"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Virtual reality (VR) interfaces"})," for robot teleoperation"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Training environments"})," for reinforcement learning"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Public demonstrations"})," and educational tools"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"unity-robotics-setup",children:"Unity Robotics Setup"}),"\n",(0,t.jsx)(e.h3,{id:"installation-requirements",children:"Installation Requirements"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Unity Hub"}),": Download from Unity's official website"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Unity Editor"}),": Install version 2021.3 LTS or later"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Unity Robotics Hub"}),": Extension for robotics-specific tools"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"installing-unity-robotics-tools",children:"Installing Unity Robotics Tools"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Through Unity Package Manager:\r\n# Window \u2192 Package Manager \u2192 Unity Registry\r\n# Install:\r\n# - Unity Robotics Hub\r\n# - ROS-TCP-Connector\r\n# - Unity Perception\r\n# - ML-Agents (for AI training)\n"})}),"\n",(0,t.jsx)(e.h2,{id:"unity-ros-integration",children:"Unity ROS Integration"}),"\n",(0,t.jsx)(e.h3,{id:"ros-tcp-connector",children:"ROS-TCP-Connector"}),"\n",(0,t.jsx)(e.p,{children:"The ROS-TCP-Connector package enables communication between Unity and ROS 2:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Std;\r\n\r\npublic class RobotController : MonoBehaviour\r\n{\r\n    ROSConnection ros;\r\n\r\n    void Start()\r\n    {\r\n        // Connect to ROS\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n        ros.RegisterPublisher<UInt64Msg>("robot_command");\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        // Send a message to ROS\r\n        if (Input.GetKeyDown(KeyCode.Space))\r\n        {\r\n            ros.Publish("robot_command", new UInt64Msg(1));\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"setting-up-the-connection",children:"Setting Up the Connection"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Start ROS 2 bridge"})," in your terminal:"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Terminal 1\r\nsource /opt/ros/humble/setup.bash\r\nsource install/setup.bash\r\nros2 run ros_tcp_endpoint default_server_endpoint --ros-args -p ROS_IP:=127.0.0.1 -p ROS_TCP_PORT:=10000\n"})}),"\n",(0,t.jsxs)(e.ol,{start:"2",children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Configure Unity"})," to connect to the bridge:"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'// In Unity, configure the ROS connection\r\nusing Unity.Robotics.ROSTCPConnector;\r\n\r\npublic class ROSConnectionSetup : MonoBehaviour\r\n{\r\n    public string rosIPAddress = "127.0.0.1";\r\n    public int rosPort = 10000;\r\n\r\n    void Start()\r\n    {\r\n        ROSConnection.instance = ROSConnection.GetOrCreateInstance();\r\n        ROSConnection.instance.RosIPAddress = rosIPAddress;\r\n        ROSConnection.instance.RosPort = rosPort;\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"creating-robot-models-in-unity",children:"Creating Robot Models in Unity"}),"\n",(0,t.jsx)(e.h3,{id:"importing-robot-models",children:"Importing Robot Models"}),"\n",(0,t.jsx)(e.p,{children:"Unity supports several 3D model formats:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"FBX"}),": Recommended for complex models with animations"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"OBJ"}),": Simple geometry import"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"DAE"}),": Collada format for interchange"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"USD"}),": Universal Scene Description (Unity native)"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"robot-structure-in-unity",children:"Robot Structure in Unity"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\n\r\npublic class RobotModel : MonoBehaviour\r\n{\r\n    [Header("Robot Joints")]\r\n    public Transform baseLink;\r\n    public Transform joint1;\r\n    public Transform joint2;\r\n    public Transform endEffector;\r\n\r\n    [Header("Joint Limits")]\r\n    public float joint1Min = -90f;\r\n    public float joint1Max = 90f;\r\n    public float joint2Min = -45f;\r\n    public float joint2Max = 45f;\r\n\r\n    // Forward kinematics calculation\r\n    public Vector3 CalculateEndEffectorPosition()\r\n    {\r\n        return endEffector.position;\r\n    }\r\n\r\n    // Inverse kinematics (simplified)\r\n    public void SetJointAngles(float angle1, float angle2)\r\n    {\r\n        angle1 = Mathf.Clamp(angle1, joint1Min, joint1Max);\r\n        angle2 = Mathf.Clamp(angle2, joint2Min, joint2Max);\r\n\r\n        joint1.localEulerAngles = new Vector3(0, 0, angle1);\r\n        joint2.localEulerAngles = new Vector3(0, 0, angle2);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"joint-control-system",children:"Joint Control System"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Sensor;\r\n\r\npublic class JointController : MonoBehaviour\r\n{\r\n    ROSConnection ros;\r\n    public string jointStateTopic = "/joint_states";\r\n    public Transform[] joints;\r\n    public string[] jointNames;\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n        ros.Subscribe<JointStateMsg>(jointStateTopic, OnJointStateReceived);\r\n    }\r\n\r\n    void OnJointStateReceived(JointStateMsg jointState)\r\n    {\r\n        for (int i = 0; i < jointNames.Length; i++)\r\n        {\r\n            int jointIndex = System.Array.IndexOf(jointState.name, jointNames[i]);\r\n            if (jointIndex >= 0 && jointIndex < jointState.position.Length)\r\n            {\r\n                // Apply joint position to Unity transform\r\n                joints[i].localEulerAngles = new Vector3(0, 0, (float)jointState.position[jointIndex] * Mathf.Rad2Deg);\r\n            }\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"sensor-simulation-in-unity",children:"Sensor Simulation in Unity"}),"\n",(0,t.jsx)(e.h3,{id:"camera-sensors",children:"Camera Sensors"}),"\n",(0,t.jsx)(e.p,{children:"Unity's built-in cameras can simulate various types of vision sensors:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Sensor;\r\n\r\npublic class UnityCameraSensor : MonoBehaviour\r\n{\r\n    Camera cam;\r\n    ROSConnection ros;\r\n    public string imageTopic = "/camera/image_raw";\r\n    public int imageWidth = 640;\r\n    public int imageHeight = 480;\r\n    public float updateRate = 30.0f;\r\n\r\n    RenderTexture renderTexture;\r\n    Texture2D texture2D;\r\n\r\n    void Start()\r\n    {\r\n        cam = GetComponent<Camera>();\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n\r\n        // Create render texture for camera\r\n        renderTexture = new RenderTexture(imageWidth, imageHeight, 24);\r\n        texture2D = new Texture2D(imageWidth, imageHeight, TextureFormat.RGB24, false);\r\n        cam.targetTexture = renderTexture;\r\n\r\n        InvokeRepeating("CaptureAndSendImage", 0, 1.0f / updateRate);\r\n    }\r\n\r\n    void CaptureAndSendImage()\r\n    {\r\n        // Set the active render texture\r\n        RenderTexture.active = renderTexture;\r\n\r\n        // Read pixels from the render texture\r\n        texture2D.ReadPixels(new Rect(0, 0, imageWidth, imageHeight), 0, 0);\r\n        texture2D.Apply();\r\n\r\n        // Convert to ROS message format (simplified)\r\n        byte[] imageData = texture2D.EncodeToJPG();\r\n\r\n        // Send image via ROS (implementation depends on message format)\r\n        // ros.Publish(imageTopic, imageMsg);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"lidar-simulation",children:"LIDAR Simulation"}),"\n",(0,t.jsx)(e.p,{children:"Unity can simulate LIDAR sensors using raycasting:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Robotics.ROSTCPConnector;\r\nusing System.Collections.Generic;\r\n\r\npublic class UnityLidar : MonoBehaviour\r\n{\r\n    public int horizontalSamples = 720;\r\n    public int verticalSamples = 1;\r\n    public float minAngle = -Mathf.PI;\r\n    public float maxAngle = Mathf.PI;\r\n    public float maxRange = 30.0f;\r\n    public LayerMask detectionMask = -1; // All layers\r\n\r\n    ROSConnection ros;\r\n    public string scanTopic = "/scan";\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n        InvokeRepeating("SimulateLidar", 0, 0.1f); // 10Hz\r\n    }\r\n\r\n    void SimulateLidar()\r\n    {\r\n        List<float> ranges = new List<float>();\r\n\r\n        float angleIncrement = (maxAngle - minAngle) / horizontalSamples;\r\n\r\n        for (int i = 0; i < horizontalSamples; i++)\r\n        {\r\n            float angle = minAngle + i * angleIncrement;\r\n\r\n            Vector3 direction = new Vector3(\r\n                Mathf.Cos(angle),\r\n                0,\r\n                Mathf.Sin(angle)\r\n            );\r\n\r\n            RaycastHit hit;\r\n            if (Physics.Raycast(transform.position, transform.TransformDirection(direction),\r\n                              out hit, maxRange, detectionMask))\r\n            {\r\n                ranges.Add(hit.distance);\r\n            }\r\n            else\r\n            {\r\n                ranges.Add(maxRange); // No obstacle detected\r\n            }\r\n        }\r\n\r\n        // Publish ranges to ROS (simplified)\r\n        // ros.Publish(scanTopic, laserScanMsg);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"unity-perception-package",children:"Unity Perception Package"}),"\n",(0,t.jsx)(e.p,{children:"The Unity Perception package provides tools for generating synthetic training data:"}),"\n",(0,t.jsx)(e.h3,{id:"semantic-segmentation",children:"Semantic Segmentation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Perception.GroundTruth;\r\nusing Unity.Perception.GroundTruth.LabelManagement;\r\n\r\npublic class SemanticSegmentationSetup : MonoBehaviour\r\n{\r\n    void Start()\r\n    {\r\n        // Assign semantic labels to objects\r\n        AssignSemanticLabels();\r\n    }\r\n\r\n    void AssignSemanticLabels()\r\n    {\r\n        GameObject[] objects = GameObject.FindGameObjectsWithTag("SemanticObject");\r\n\r\n        foreach (GameObject obj in objects)\r\n        {\r\n            var labeler = obj.GetComponent<SemanticLabeler>();\r\n            if (labeler == null)\r\n                labeler = obj.AddComponent<SemanticLabeler>();\r\n\r\n            // Assign labels based on object type\r\n            if (obj.tag == "Robot")\r\n                labeler.labelId = 1;\r\n            else if (obj.tag == "Obstacle")\r\n                labeler.labelId = 2;\r\n            else if (obj.tag == "Ground")\r\n                labeler.labelId = 3;\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"dataset-generation",children:"Dataset Generation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Perception.GroundTruth;\r\nusing System.Collections;\r\n\r\npublic class DatasetGenerator : MonoBehaviour\r\n{\r\n    public int datasetSize = 1000;\r\n    public float captureInterval = 0.5f;\r\n\r\n    void Start()\r\n    {\r\n        StartCoroutine(GenerateDataset());\r\n    }\r\n\r\n    IEnumerator GenerateDataset()\r\n    {\r\n        for (int i = 0; i < datasetSize; i++)\r\n        {\r\n            // Move objects to random positions\r\n            RandomizeScene();\r\n\r\n            // Capture ground truth data\r\n            CaptureGroundTruth();\r\n\r\n            yield return new WaitForSeconds(captureInterval);\r\n        }\r\n    }\r\n\r\n    void RandomizeScene()\r\n    {\r\n        // Randomly position objects in the scene\r\n        GameObject[] sceneObjects = GameObject.FindGameObjectsWithTag("RandomObject");\r\n\r\n        foreach (GameObject obj in sceneObjects)\r\n        {\r\n            Vector3 randomPos = new Vector3(\r\n                Random.Range(-5f, 5f),\r\n                Random.Range(0f, 2f),\r\n                Random.Range(-5f, 5f)\r\n            );\r\n\r\n            obj.transform.position = randomPos;\r\n\r\n            // Random rotation\r\n            obj.transform.rotation = Random.rotation;\r\n        }\r\n    }\r\n\r\n    void CaptureGroundTruth()\r\n    {\r\n        // Trigger capture of all ground truth data\r\n        // This would typically save images and annotations\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"digital-twin-implementation",children:"Digital Twin Implementation"}),"\n",(0,t.jsx)(e.h3,{id:"real-time-synchronization",children:"Real-time Synchronization"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Nav;\r\nusing RosMessageTypes.Geometry;\r\n\r\npublic class DigitalTwin : MonoBehaviour\r\n{\r\n    ROSConnection ros;\r\n    public string tfTopic = "/tf";\r\n    public string odomTopic = "/odom";\r\n\r\n    // Store robot state\r\n    Vector3 realPosition;\r\n    Quaternion realRotation;\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n        ros.Subscribe<OdometryMsg>(odomTopic, OnOdometryReceived);\r\n        ros.Subscribe<TFMessage>(tfTopic, OnTFReceived);\r\n    }\r\n\r\n    void OnOdometryReceived(OdometryMsg odom)\r\n    {\r\n        // Update digital twin with real robot pose\r\n        realPosition = new Vector3(\r\n            (float)odom.pose.pose.position.x,\r\n            (float)odom.pose.pose.position.y,\r\n            (float)odom.pose.pose.position.z\r\n        );\r\n\r\n        realRotation = new Quaternion(\r\n            (float)odom.pose.pose.orientation.x,\r\n            (float)odom.pose.pose.orientation.y,\r\n            (float)odom.pose.pose.orientation.z,\r\n            (float)odom.pose.pose.orientation.w\r\n        );\r\n\r\n        // Apply to Unity object\r\n        transform.position = realPosition;\r\n        transform.rotation = realRotation;\r\n    }\r\n\r\n    void OnTFReceived(TFMessage tf)\r\n    {\r\n        // Handle transform updates for multi-link robots\r\n        foreach (var transform in tf.transforms)\r\n        {\r\n            // Update corresponding Unity object\r\n            UpdateLinkPose(transform.child_frame_id, transform.transform);\r\n        }\r\n    }\r\n\r\n    void UpdateLinkPose(string frameId, TransformMsg tf)\r\n    {\r\n        GameObject linkObject = GameObject.Find(frameId);\r\n        if (linkObject != null)\r\n        {\r\n            linkObject.transform.position = new Vector3(\r\n                (float)tf.translation.x,\r\n                (float)tf.translation.y,\r\n                (float)tf.translation.z\r\n            );\r\n\r\n            linkObject.transform.rotation = new Quaternion(\r\n                (float)tf.rotation.x,\r\n                (float)tf.rotation.y,\r\n                (float)tf.rotation.z,\r\n                (float)tf.rotation.w\r\n            );\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(e.h3,{id:"level-of-detail-lod",children:"Level of Detail (LOD)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\r\n\r\npublic class RobotLOD : MonoBehaviour\r\n{\r\n    public float[] lodDistances = {10f, 30f, 50f};\r\n    public GameObject[] lodObjects;\r\n\r\n    Camera mainCamera;\r\n\r\n    void Start()\r\n    {\r\n        mainCamera = Camera.main;\r\n        UpdateLOD();\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        UpdateLOD();\r\n    }\r\n\r\n    void UpdateLOD()\r\n    {\r\n        if (mainCamera == null) return;\r\n\r\n        float distance = Vector3.Distance(transform.position, mainCamera.transform.position);\r\n\r\n        for (int i = 0; i < lodDistances.Length; i++)\r\n        {\r\n            if (distance <= lodDistances[i])\r\n            {\r\n                ActivateLOD(i);\r\n                return;\r\n            }\r\n        }\r\n\r\n        // Use lowest detail if beyond all distances\r\n        ActivateLOD(lodObjects.Length - 1);\r\n    }\r\n\r\n    void ActivateLOD(int lodIndex)\r\n    {\r\n        for (int i = 0; i < lodObjects.Length; i++)\r\n        {\r\n            if (lodObjects[i] != null)\r\n            {\r\n                lodObjects[i].SetActive(i == lodIndex);\r\n            }\r\n        }\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"occlusion-culling",children:"Occlusion Culling"}),"\n",(0,t.jsx)(e.p,{children:"Enable Unity's built-in occlusion culling for better performance:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'// In Unity Editor: Window \u2192 Rendering \u2192 Occlusion Culling\r\n// Mark static objects as "Occluder Static" or "Occludee Static"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"vr-integration-for-teleoperation",children:"VR Integration for Teleoperation"}),"\n",(0,t.jsx)(e.h3,{id:"vr-teleoperation-interface",children:"VR Teleoperation Interface"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing UnityEngine.XR;\r\nusing Unity.Robotics.ROSTCPConnector;\r\n\r\npublic class VRTeleoperation : MonoBehaviour\r\n{\r\n    ROSConnection ros;\r\n    public string commandTopic = "/teleop_command";\r\n\r\n    InputDevice leftController;\r\n    InputDevice rightController;\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.GetOrCreateInstance();\r\n\r\n        // Initialize XR devices\r\n        var devices = new List<InputDevice>();\r\n        InputDevices.GetDevices(devices);\r\n\r\n        foreach (var device in devices)\r\n        {\r\n            if (device.role == InputDeviceRole.LeftHanded)\r\n                leftController = device;\r\n            else if (device.role == InputDeviceRole.RightHanded)\r\n                rightController = device;\r\n        }\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        // Get controller inputs\r\n        if (leftController.isValid)\r\n        {\r\n            // Get trigger value\r\n            float triggerValue;\r\n            if (leftController.TryGetFeatureValue(CommonUsages.trigger, out triggerValue))\r\n            {\r\n                // Send command based on trigger\r\n                SendTeleoperationCommand(triggerValue);\r\n            }\r\n        }\r\n    }\r\n\r\n    void SendTeleoperationCommand(float value)\r\n    {\r\n        // Publish command to ROS\r\n        // ros.Publish(commandTopic, commandMsg);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(e.h3,{id:"1-scene-organization",children:"1. Scene Organization"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Use meaningful names for GameObjects"}),"\n",(0,t.jsx)(e.li,{children:"Group related objects under parent GameObjects"}),"\n",(0,t.jsx)(e.li,{children:"Use tags and layers for efficient selection"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-resource-management",children:"2. Resource Management"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Use object pooling for frequently instantiated objects"}),"\n",(0,t.jsx)(e.li,{children:"Implement proper garbage collection"}),"\n",(0,t.jsx)(e.li,{children:"Optimize textures and 3D models for performance"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-network-communication",children:"3. Network Communication"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Implement proper error handling for ROS connections"}),"\n",(0,t.jsx)(e.li,{children:"Use appropriate update rates to avoid network congestion"}),"\n",(0,t.jsx)(e.li,{children:"Consider data compression for large messages"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"4-physics-settings",children:"4. Physics Settings"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Use appropriate physics settings for your application"}),"\n",(0,t.jsx)(e.li,{children:"Balance accuracy with performance requirements"}),"\n",(0,t.jsx)(e.li,{children:"Test with various scenarios to ensure stability"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"integration-workflow",children:"Integration Workflow"}),"\n",(0,t.jsx)(e.h3,{id:"development-pipeline",children:"Development Pipeline"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"[ROS 2 Nodes] \u2194 [ROS-TCP-Endpoint] \u2194 [Unity Scene] \u2194 [Visualization]\n"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Design Phase"}),": Create 3D models and scenes in Unity"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Integration Phase"}),": Connect Unity to ROS 2 using TCP connector"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Testing Phase"}),": Validate data flow and visualization accuracy"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Optimization Phase"}),": Improve performance and visual quality"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Deployment Phase"}),": Package for target platform"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,t.jsx)(e.h3,{id:"connection-problems",children:"Connection Problems"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'// Verify ROS connection\r\nvoid CheckConnection()\r\n{\r\n    if (ROSConnection.instance == null)\r\n    {\r\n        Debug.LogError("ROS Connection not initialized!");\r\n        return;\r\n    }\r\n\r\n    if (!ROSConnection.instance.IsConnected())\r\n    {\r\n        Debug.LogWarning("Not connected to ROS bridge");\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Reduce polygon count of 3D models"}),"\n",(0,t.jsx)(e.li,{children:"Use texture atlasing to reduce draw calls"}),"\n",(0,t.jsx)(e.li,{children:"Implement frustum culling for distant objects"}),"\n",(0,t.jsx)(e.li,{children:"Optimize shader complexity"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(e.p,{children:"Unity provides a powerful platform for robotics visualization and simulation, offering high-quality graphics, real-time performance, and extensive integration capabilities. When combined with ROS 2, Unity enables the creation of sophisticated digital twins, training environments, and visualization tools that bridge the gap between simulation and reality."}),"\n",(0,t.jsx)(e.p,{children:"The Unity Robotics ecosystem continues to evolve with new tools and capabilities, making it an increasingly attractive option for robotics researchers and developers who need high-fidelity visualization and simulation capabilities."}),"\n",(0,t.jsx)(e.p,{children:"In the next section, we'll create a practical lab exercise to apply these concepts."})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);