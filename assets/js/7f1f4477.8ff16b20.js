"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics=globalThis.webpackChunkphysical_ai_humanoid_robotics||[]).push([[855],{5917:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"module1/launch-files-parameters","title":"Launch Files and Parameter Management","description":"Launch Files","source":"@site/docs/module1/launch-files-parameters.md","sourceDirName":"module1","slug":"/module1/launch-files-parameters","permalink":"/Physical-AI-Humanoid-book/docs/module1/launch-files-parameters","draft":false,"unlisted":false,"editUrl":"https://github.com/user/physical-ai-humanoid-robotics/tree/main/docs/module1/launch-files-parameters.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Practical Lab: Building Your First ROS 2 Application","permalink":"/Physical-AI-Humanoid-book/docs/module1/lab-first-application"},"next":{"title":"Nodes, Topics, Services, and Actions","permalink":"/Physical-AI-Humanoid-book/docs/module1/nodes-topics-services-actions"}}');var t=n(4848),o=n(8453);const i={},l="Launch Files and Parameter Management",s={},c=[{value:"Launch Files",id:"launch-files",level:2},{value:"Basic Launch File Structure",id:"basic-launch-file-structure",level:3},{value:"Advanced Launch File Features",id:"advanced-launch-file-features",level:3},{value:"Conditional Launch",id:"conditional-launch",level:4},{value:"Including Other Launch Files",id:"including-other-launch-files",level:4},{value:"Launch File Parameters",id:"launch-file-parameters",level:3},{value:"Parameter Management",id:"parameter-management",level:2},{value:"Parameter Files (YAML)",id:"parameter-files-yaml",level:3},{value:"Loading Parameters from YAML",id:"loading-parameters-from-yaml",level:3},{value:"Dynamic Parameter Reconfiguration",id:"dynamic-parameter-reconfiguration",level:3},{value:"Command Line Parameter Tools",id:"command-line-parameter-tools",level:2},{value:"Setting Parameters",id:"setting-parameters",level:3},{value:"Parameter Best Practices",id:"parameter-best-practices",level:2},{value:"1. Organize Parameters Logically",id:"1-organize-parameters-logically",level:3},{value:"2. Use Appropriate Parameter Types",id:"2-use-appropriate-parameter-types",level:3},{value:"3. Validate Parameters",id:"3-validate-parameters",level:3},{value:"Practical Example: Complete Launch System",id:"practical-example-complete-launch-system",level:2},{value:"Directory Structure",id:"directory-structure",level:3},{value:"robot_params.yaml",id:"robot_paramsyaml",level:3},{value:"robot_system.launch.py",id:"robot_systemlaunchpy",level:3},{value:"Summary",id:"summary",level:2}];function m(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"launch-files-and-parameter-management",children:"Launch Files and Parameter Management"})}),"\n",(0,t.jsx)(a.h2,{id:"launch-files",children:"Launch Files"}),"\n",(0,t.jsxs)(a.p,{children:["Launch files in ROS 2 allow you to start multiple nodes with a single command and configure them with specific parameters. They are written in Python using the ",(0,t.jsx)(a.code,{children:"launch"})," library."]}),"\n",(0,t.jsx)(a.h3,{id:"basic-launch-file-structure",children:"Basic Launch File Structure"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_robot_package',\n            executable='talker',\n            name='talker_node',\n            parameters=[\n                {'frequency': 1.0},\n                {'robot_name': 'my_robot'}\n            ],\n            remappings=[\n                ('/chatter', '/custom_chatter')\n            ],\n            output='screen'\n        ),\n        Node(\n            package='my_robot_package',\n            executable='listener',\n            name='listener_node',\n            output='screen'\n        )\n    ])\n"})}),"\n",(0,t.jsx)(a.h3,{id:"advanced-launch-file-features",children:"Advanced Launch File Features"}),"\n",(0,t.jsx)(a.h4,{id:"conditional-launch",children:"Conditional Launch"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.conditions import IfCondition\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\n\n\ndef generate_launch_description():\n    # Declare launch arguments\n    use_sim_time = LaunchConfiguration('use_sim_time')\n    debug_mode = LaunchConfiguration('debug')\n\n    # Declare launch arguments\n    declare_use_sim_time = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation time'\n    )\n\n    declare_debug = DeclareLaunchArgument(\n        'debug',\n        default_value='false',\n        description='Enable debug mode'\n    )\n\n    # Conditional node\n    debug_node = Node(\n        package='my_robot_package',\n        executable='debug_node',\n        condition=IfCondition(debug_mode)\n    )\n\n    return LaunchDescription([\n        declare_use_sim_time,\n        declare_debug,\n        debug_node\n    ])\n"})}),"\n",(0,t.jsx)(a.h4,{id:"including-other-launch-files",children:"Including Other Launch Files"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\n\ndef generate_launch_description():\n    # Include another launch file\n    other_launch_file = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource(\n            os.path.join(\n                get_package_share_directory('other_package'),\n                'launch',\n                'other_launch.py'\n            )\n        )\n    )\n\n    return LaunchDescription([\n        other_launch_file\n    ])\n"})}),"\n",(0,t.jsx)(a.h3,{id:"launch-file-parameters",children:"Launch File Parameters"}),"\n",(0,t.jsx)(a.p,{children:"Launch files can accept parameters that can be passed at runtime:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"# Launch with parameters\nros2 launch my_robot_package my_launch.py use_sim_time:=true debug:=true\n"})}),"\n",(0,t.jsx)(a.h2,{id:"parameter-management",children:"Parameter Management"}),"\n",(0,t.jsx)(a.h3,{id:"parameter-files-yaml",children:"Parameter Files (YAML)"}),"\n",(0,t.jsx)(a.p,{children:"Parameters can be stored in YAML files for easy management:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-yaml",children:'# config/my_robot_params.yaml\nmy_robot_node:\n  ros__parameters:\n    # Basic parameters\n    robot_name: "my_robot"\n    frequency: 10.0\n    max_velocity: 1.0\n\n    # Nested parameters\n    controller:\n      kp: 1.0\n      ki: 0.1\n      kd: 0.05\n\n    # Array parameters\n    joint_names: ["joint1", "joint2", "joint3"]\n\n    # Namespace parameters\n    sensors:\n      lidar_enabled: true\n      camera_enabled: false\n'})}),"\n",(0,t.jsx)(a.h3,{id:"loading-parameters-from-yaml",children:"Loading Parameters from YAML"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\n\ndef generate_launch_description():\n    # Get path to parameter file\n    params_file = os.path.join(\n        get_package_share_directory('my_robot_package'),\n        'config',\n        'my_robot_params.yaml'\n    )\n\n    return LaunchDescription([\n        Node(\n            package='my_robot_package',\n            executable='my_robot_node',\n            name='my_robot_node',\n            parameters=[params_file],\n            output='screen'\n        )\n    ])\n"})}),"\n",(0,t.jsx)(a.h3,{id:"dynamic-parameter-reconfiguration",children:"Dynamic Parameter Reconfiguration"}),"\n",(0,t.jsx)(a.p,{children:"ROS 2 allows parameters to be changed at runtime:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom rcl_interfaces.msg import ParameterType, ParameterDescriptor\nfrom rcl_interfaces.srv import SetParameters\nfrom rcl_interfaces.msg import Parameter\n\n\nclass ParameterNode(Node):\n    def __init__(self):\n        super().__init__('parameter_node')\n\n        # Declare parameters with descriptors\n        self.declare_parameter(\n            'velocity',\n            0.5,\n            ParameterDescriptor(\n                name='velocity',\n                type=ParameterType.PARAMETER_DOUBLE,\n                description='Robot velocity',\n                additional_constraints='Must be between 0.0 and 2.0',\n                floating_point_range=[0.0, 2.0]\n            )\n        )\n\n        # Create parameter callback\n        self.add_on_set_parameters_callback(self.parameter_callback)\n\n    def parameter_callback(self, params):\n        for param in params:\n            if param.name == 'velocity' and param.value.double_value > 2.0:\n                return SetParameters.Response(\n                    successful=False,\n                    reason='Velocity must be <= 2.0'\n                )\n        return SetParameters.Response(successful=True)\n"})}),"\n",(0,t.jsx)(a.h2,{id:"command-line-parameter-tools",children:"Command Line Parameter Tools"}),"\n",(0,t.jsx)(a.h3,{id:"setting-parameters",children:"Setting Parameters"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"# Set a parameter on a running node\nros2 param set /my_node frequency 2.0\n\n# Get parameter value\nros2 param get /my_node frequency\n\n# List all parameters for a node\nros2 param list /my_node\n\n# Load parameters from file\nros2 param load /my_node /path/to/params.yaml\n\n# Save parameters to file\nros2 param dump /my_node --output /path/to/params.yaml\n"})}),"\n",(0,t.jsx)(a.h2,{id:"parameter-best-practices",children:"Parameter Best Practices"}),"\n",(0,t.jsx)(a.h3,{id:"1-organize-parameters-logically",children:"1. Organize Parameters Logically"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-yaml",children:"# Good organization\nrobot_controller:\n  ros__parameters:\n    # Control parameters\n    control:\n      frequency: 100.0\n      max_acceleration: 2.0\n\n    # Hardware parameters\n    hardware:\n      encoder_resolution: 4096\n      motor_limits:\n        max_current: 10.0\n        max_voltage: 24.0\n"})}),"\n",(0,t.jsx)(a.h3,{id:"2-use-appropriate-parameter-types",children:"2. Use Appropriate Parameter Types"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"# Declare parameters with appropriate types\nself.declare_parameter('int_param', 42, ParameterDescriptor(type=ParameterType.PARAMETER_INTEGER))\nself.declare_parameter('double_param', 3.14, ParameterDescriptor(type=ParameterType.PARAMETER_DOUBLE))\nself.declare_parameter('string_param', 'hello', ParameterDescriptor(type=ParameterType.PARAMETER_STRING))\nself.declare_parameter('bool_param', True, ParameterDescriptor(type=ParameterType.PARAMETER_BOOL))\nself.declare_parameter('array_param', [1, 2, 3], ParameterDescriptor(type=ParameterType.PARAMETER_INTEGER_ARRAY))\n"})}),"\n",(0,t.jsx)(a.h3,{id:"3-validate-parameters",children:"3. Validate Parameters"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"def validate_parameters(self):\n    velocity = self.get_parameter('velocity').value\n    if velocity < 0.0 or velocity > 2.0:\n        self.get_logger().error(f'Velocity {velocity} is out of range [0.0, 2.0]')\n        return False\n    return True\n"})}),"\n",(0,t.jsx)(a.h2,{id:"practical-example-complete-launch-system",children:"Practical Example: Complete Launch System"}),"\n",(0,t.jsx)(a.p,{children:"Here's a complete example showing how to set up a robot system with launch files and parameters:"}),"\n",(0,t.jsx)(a.h3,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{children:"my_robot_package/\n\u251c\u2500\u2500 launch/\n\u2502   \u2514\u2500\u2500 robot_system.launch.py\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 robot_params.yaml\n\u2502   \u2514\u2500\u2500 controller_params.yaml\n\u2514\u2500\u2500 my_robot_package/\n    \u251c\u2500\u2500 robot_controller.py\n    \u2514\u2500\u2500 sensor_processor.py\n"})}),"\n",(0,t.jsx)(a.h3,{id:"robot_paramsyaml",children:"robot_params.yaml"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-yaml",children:'robot_controller:\n  ros__parameters:\n    robot_name: "my_robot"\n    control_frequency: 50.0\n    max_velocity: 1.0\n    safety:\n      max_distance: 0.5\n      emergency_stop: false\n\nsensor_processor:\n  ros__parameters:\n    sensor_frequency: 30.0\n    filter_enabled: true\n    calibration:\n      offset_x: 0.0\n      offset_y: 0.0\n'})}),"\n",(0,t.jsx)(a.h3,{id:"robot_systemlaunchpy",children:"robot_system.launch.py"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, LogInfo\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\n\ndef generate_launch_description():\n    # Declare launch arguments\n    params_file_arg = DeclareLaunchArgument(\n        'params_file',\n        default_value=os.path.join(\n            get_package_share_directory('my_robot_package'),\n            'config',\n            'robot_params.yaml'\n        ),\n        description='Path to parameters file'\n    )\n\n    # Get launch configuration\n    params_file = LaunchConfiguration('params_file')\n\n    return LaunchDescription([\n        params_file_arg,\n        LogInfo(msg=['Loading parameters from: ', params_file]),\n\n        # Robot controller node\n        Node(\n            package='my_robot_package',\n            executable='robot_controller',\n            name='robot_controller',\n            parameters=[params_file],\n            output='screen',\n            respawn=True\n        ),\n\n        # Sensor processor node\n        Node(\n            package='my_robot_package',\n            executable='sensor_processor',\n            name='sensor_processor',\n            parameters=[params_file],\n            output='screen',\n            respawn=True\n        )\n    ])\n"})}),"\n",(0,t.jsx)(a.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(a.p,{children:"Launch files and parameter management are crucial for configuring and running complex robotic systems. They allow you to:"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsx)(a.li,{children:"Start multiple nodes with a single command"}),"\n",(0,t.jsx)(a.li,{children:"Configure nodes with parameters at launch time"}),"\n",(0,t.jsx)(a.li,{children:"Enable conditional launching based on arguments"}),"\n",(0,t.jsx)(a.li,{children:"Manage parameters in organized YAML files"}),"\n",(0,t.jsx)(a.li,{children:"Dynamically reconfigure parameters during runtime"}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"Understanding these concepts will help you build more maintainable and configurable robotic applications."})]})}function p(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>l});var r=n(6540);const t={},o=r.createContext(t);function i(e){const a=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:a},e.children)}}}]);