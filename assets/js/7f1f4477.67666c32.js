"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics=globalThis.webpackChunkphysical_ai_humanoid_robotics||[]).push([[855],{5917:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"module1/launch-files-parameters","title":"Launch Files and Parameter Management","description":"Launch Files","source":"@site/docs/module1/launch-files-parameters.md","sourceDirName":"module1","slug":"/module1/launch-files-parameters","permalink":"/Physical-AI-Humanoid-book/docs/module1/launch-files-parameters","draft":false,"unlisted":false,"editUrl":"https://github.com/user/physical-ai-humanoid-robotics/tree/main/docs/module1/launch-files-parameters.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Practical Lab: Building Your First ROS 2 Application","permalink":"/Physical-AI-Humanoid-book/docs/module1/lab-first-application"},"next":{"title":"Nodes, Topics, Services, and Actions","permalink":"/Physical-AI-Humanoid-book/docs/module1/nodes-topics-services-actions"}}');var t=a(4848),o=a(8453);const i={},l="Launch Files and Parameter Management",s={},c=[{value:"Launch Files",id:"launch-files",level:2},{value:"Basic Launch File Structure",id:"basic-launch-file-structure",level:3},{value:"Advanced Launch File Features",id:"advanced-launch-file-features",level:3},{value:"Conditional Launch",id:"conditional-launch",level:4},{value:"Including Other Launch Files",id:"including-other-launch-files",level:4},{value:"Launch File Parameters",id:"launch-file-parameters",level:3},{value:"Parameter Management",id:"parameter-management",level:2},{value:"Parameter Files (YAML)",id:"parameter-files-yaml",level:3},{value:"Loading Parameters from YAML",id:"loading-parameters-from-yaml",level:3},{value:"Dynamic Parameter Reconfiguration",id:"dynamic-parameter-reconfiguration",level:3},{value:"Command Line Parameter Tools",id:"command-line-parameter-tools",level:2},{value:"Setting Parameters",id:"setting-parameters",level:3},{value:"Parameter Best Practices",id:"parameter-best-practices",level:2},{value:"1. Organize Parameters Logically",id:"1-organize-parameters-logically",level:3},{value:"2. Use Appropriate Parameter Types",id:"2-use-appropriate-parameter-types",level:3},{value:"3. Validate Parameters",id:"3-validate-parameters",level:3},{value:"Practical Example: Complete Launch System",id:"practical-example-complete-launch-system",level:2},{value:"Directory Structure",id:"directory-structure",level:3},{value:"robot_params.yaml",id:"robot_paramsyaml",level:3},{value:"robot_system.launch.py",id:"robot_systemlaunchpy",level:3},{value:"Summary",id:"summary",level:2}];function m(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"launch-files-and-parameter-management",children:"Launch Files and Parameter Management"})}),"\n",(0,t.jsx)(r.h2,{id:"launch-files",children:"Launch Files"}),"\n",(0,t.jsxs)(r.p,{children:["Launch files in ROS 2 allow you to start multiple nodes with a single command and configure them with specific parameters. They are written in Python using the ",(0,t.jsx)(r.code,{children:"launch"})," library."]}),"\n",(0,t.jsx)(r.h3,{id:"basic-launch-file-structure",children:"Basic Launch File Structure"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_robot_package',\r\n            executable='talker',\r\n            name='talker_node',\r\n            parameters=[\r\n                {'frequency': 1.0},\r\n                {'robot_name': 'my_robot'}\r\n            ],\r\n            remappings=[\r\n                ('/chatter', '/custom_chatter')\r\n            ],\r\n            output='screen'\r\n        ),\r\n        Node(\r\n            package='my_robot_package',\r\n            executable='listener',\r\n            name='listener_node',\r\n            output='screen'\r\n        )\r\n    ])\n"})}),"\n",(0,t.jsx)(r.h3,{id:"advanced-launch-file-features",children:"Advanced Launch File Features"}),"\n",(0,t.jsx)(r.h4,{id:"conditional-launch",children:"Conditional Launch"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.conditions import IfCondition\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\n\r\ndef generate_launch_description():\r\n    # Declare launch arguments\r\n    use_sim_time = LaunchConfiguration('use_sim_time')\r\n    debug_mode = LaunchConfiguration('debug')\r\n\r\n    # Declare launch arguments\r\n    declare_use_sim_time = DeclareLaunchArgument(\r\n        'use_sim_time',\r\n        default_value='false',\r\n        description='Use simulation time'\r\n    )\r\n\r\n    declare_debug = DeclareLaunchArgument(\r\n        'debug',\r\n        default_value='false',\r\n        description='Enable debug mode'\r\n    )\r\n\r\n    # Conditional node\r\n    debug_node = Node(\r\n        package='my_robot_package',\r\n        executable='debug_node',\r\n        condition=IfCondition(debug_mode)\r\n    )\r\n\r\n    return LaunchDescription([\r\n        declare_use_sim_time,\r\n        declare_debug,\r\n        debug_node\r\n    ])\n"})}),"\n",(0,t.jsx)(r.h4,{id:"including-other-launch-files",children:"Including Other Launch Files"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch.actions import IncludeLaunchDescription\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\n\r\ndef generate_launch_description():\r\n    # Include another launch file\r\n    other_launch_file = IncludeLaunchDescription(\r\n        PythonLaunchDescriptionSource(\r\n            os.path.join(\r\n                get_package_share_directory('other_package'),\r\n                'launch',\r\n                'other_launch.py'\r\n            )\r\n        )\r\n    )\r\n\r\n    return LaunchDescription([\r\n        other_launch_file\r\n    ])\n"})}),"\n",(0,t.jsx)(r.h3,{id:"launch-file-parameters",children:"Launch File Parameters"}),"\n",(0,t.jsx)(r.p,{children:"Launch files can accept parameters that can be passed at runtime:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# Launch with parameters\r\nros2 launch my_robot_package my_launch.py use_sim_time:=true debug:=true\n"})}),"\n",(0,t.jsx)(r.h2,{id:"parameter-management",children:"Parameter Management"}),"\n",(0,t.jsx)(r.h3,{id:"parameter-files-yaml",children:"Parameter Files (YAML)"}),"\n",(0,t.jsx)(r.p,{children:"Parameters can be stored in YAML files for easy management:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:'# config/my_robot_params.yaml\r\nmy_robot_node:\r\n  ros__parameters:\r\n    # Basic parameters\r\n    robot_name: "my_robot"\r\n    frequency: 10.0\r\n    max_velocity: 1.0\r\n\r\n    # Nested parameters\r\n    controller:\r\n      kp: 1.0\r\n      ki: 0.1\r\n      kd: 0.05\r\n\r\n    # Array parameters\r\n    joint_names: ["joint1", "joint2", "joint3"]\r\n\r\n    # Namespace parameters\r\n    sensors:\r\n      lidar_enabled: true\r\n      camera_enabled: false\n'})}),"\n",(0,t.jsx)(r.h3,{id:"loading-parameters-from-yaml",children:"Loading Parameters from YAML"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\n\r\ndef generate_launch_description():\r\n    # Get path to parameter file\r\n    params_file = os.path.join(\r\n        get_package_share_directory('my_robot_package'),\r\n        'config',\r\n        'my_robot_params.yaml'\r\n    )\r\n\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_robot_package',\r\n            executable='my_robot_node',\r\n            name='my_robot_node',\r\n            parameters=[params_file],\r\n            output='screen'\r\n        )\r\n    ])\n"})}),"\n",(0,t.jsx)(r.h3,{id:"dynamic-parameter-reconfiguration",children:"Dynamic Parameter Reconfiguration"}),"\n",(0,t.jsx)(r.p,{children:"ROS 2 allows parameters to be changed at runtime:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom rcl_interfaces.msg import ParameterType, ParameterDescriptor\r\nfrom rcl_interfaces.srv import SetParameters\r\nfrom rcl_interfaces.msg import Parameter\r\n\r\n\r\nclass ParameterNode(Node):\r\n    def __init__(self):\r\n        super().__init__('parameter_node')\r\n\r\n        # Declare parameters with descriptors\r\n        self.declare_parameter(\r\n            'velocity',\r\n            0.5,\r\n            ParameterDescriptor(\r\n                name='velocity',\r\n                type=ParameterType.PARAMETER_DOUBLE,\r\n                description='Robot velocity',\r\n                additional_constraints='Must be between 0.0 and 2.0',\r\n                floating_point_range=[0.0, 2.0]\r\n            )\r\n        )\r\n\r\n        # Create parameter callback\r\n        self.add_on_set_parameters_callback(self.parameter_callback)\r\n\r\n    def parameter_callback(self, params):\r\n        for param in params:\r\n            if param.name == 'velocity' and param.value.double_value > 2.0:\r\n                return SetParameters.Response(\r\n                    successful=False,\r\n                    reason='Velocity must be <= 2.0'\r\n                )\r\n        return SetParameters.Response(successful=True)\n"})}),"\n",(0,t.jsx)(r.h2,{id:"command-line-parameter-tools",children:"Command Line Parameter Tools"}),"\n",(0,t.jsx)(r.h3,{id:"setting-parameters",children:"Setting Parameters"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# Set a parameter on a running node\r\nros2 param set /my_node frequency 2.0\r\n\r\n# Get parameter value\r\nros2 param get /my_node frequency\r\n\r\n# List all parameters for a node\r\nros2 param list /my_node\r\n\r\n# Load parameters from file\r\nros2 param load /my_node /path/to/params.yaml\r\n\r\n# Save parameters to file\r\nros2 param dump /my_node --output /path/to/params.yaml\n"})}),"\n",(0,t.jsx)(r.h2,{id:"parameter-best-practices",children:"Parameter Best Practices"}),"\n",(0,t.jsx)(r.h3,{id:"1-organize-parameters-logically",children:"1. Organize Parameters Logically"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:"# Good organization\r\nrobot_controller:\r\n  ros__parameters:\r\n    # Control parameters\r\n    control:\r\n      frequency: 100.0\r\n      max_acceleration: 2.0\r\n\r\n    # Hardware parameters\r\n    hardware:\r\n      encoder_resolution: 4096\r\n      motor_limits:\r\n        max_current: 10.0\r\n        max_voltage: 24.0\n"})}),"\n",(0,t.jsx)(r.h3,{id:"2-use-appropriate-parameter-types",children:"2. Use Appropriate Parameter Types"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"# Declare parameters with appropriate types\r\nself.declare_parameter('int_param', 42, ParameterDescriptor(type=ParameterType.PARAMETER_INTEGER))\r\nself.declare_parameter('double_param', 3.14, ParameterDescriptor(type=ParameterType.PARAMETER_DOUBLE))\r\nself.declare_parameter('string_param', 'hello', ParameterDescriptor(type=ParameterType.PARAMETER_STRING))\r\nself.declare_parameter('bool_param', True, ParameterDescriptor(type=ParameterType.PARAMETER_BOOL))\r\nself.declare_parameter('array_param', [1, 2, 3], ParameterDescriptor(type=ParameterType.PARAMETER_INTEGER_ARRAY))\n"})}),"\n",(0,t.jsx)(r.h3,{id:"3-validate-parameters",children:"3. Validate Parameters"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"def validate_parameters(self):\r\n    velocity = self.get_parameter('velocity').value\r\n    if velocity < 0.0 or velocity > 2.0:\r\n        self.get_logger().error(f'Velocity {velocity} is out of range [0.0, 2.0]')\r\n        return False\r\n    return True\n"})}),"\n",(0,t.jsx)(r.h2,{id:"practical-example-complete-launch-system",children:"Practical Example: Complete Launch System"}),"\n",(0,t.jsx)(r.p,{children:"Here's a complete example showing how to set up a robot system with launch files and parameters:"}),"\n",(0,t.jsx)(r.h3,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"my_robot_package/\r\n\u251c\u2500\u2500 launch/\r\n\u2502   \u2514\u2500\u2500 robot_system.launch.py\r\n\u251c\u2500\u2500 config/\r\n\u2502   \u251c\u2500\u2500 robot_params.yaml\r\n\u2502   \u2514\u2500\u2500 controller_params.yaml\r\n\u2514\u2500\u2500 my_robot_package/\r\n    \u251c\u2500\u2500 robot_controller.py\r\n    \u2514\u2500\u2500 sensor_processor.py\n"})}),"\n",(0,t.jsx)(r.h3,{id:"robot_paramsyaml",children:"robot_params.yaml"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:'robot_controller:\r\n  ros__parameters:\r\n    robot_name: "my_robot"\r\n    control_frequency: 50.0\r\n    max_velocity: 1.0\r\n    safety:\r\n      max_distance: 0.5\r\n      emergency_stop: false\r\n\r\nsensor_processor:\r\n  ros__parameters:\r\n    sensor_frequency: 30.0\r\n    filter_enabled: true\r\n    calibration:\r\n      offset_x: 0.0\r\n      offset_y: 0.0\n'})}),"\n",(0,t.jsx)(r.h3,{id:"robot_systemlaunchpy",children:"robot_system.launch.py"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument, LogInfo\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\n\r\ndef generate_launch_description():\r\n    # Declare launch arguments\r\n    params_file_arg = DeclareLaunchArgument(\r\n        'params_file',\r\n        default_value=os.path.join(\r\n            get_package_share_directory('my_robot_package'),\r\n            'config',\r\n            'robot_params.yaml'\r\n        ),\r\n        description='Path to parameters file'\r\n    )\r\n\r\n    # Get launch configuration\r\n    params_file = LaunchConfiguration('params_file')\r\n\r\n    return LaunchDescription([\r\n        params_file_arg,\r\n        LogInfo(msg=['Loading parameters from: ', params_file]),\r\n\r\n        # Robot controller node\r\n        Node(\r\n            package='my_robot_package',\r\n            executable='robot_controller',\r\n            name='robot_controller',\r\n            parameters=[params_file],\r\n            output='screen',\r\n            respawn=True\r\n        ),\r\n\r\n        # Sensor processor node\r\n        Node(\r\n            package='my_robot_package',\r\n            executable='sensor_processor',\r\n            name='sensor_processor',\r\n            parameters=[params_file],\r\n            output='screen',\r\n            respawn=True\r\n        )\r\n    ])\n"})}),"\n",(0,t.jsx)(r.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(r.p,{children:"Launch files and parameter management are crucial for configuring and running complex robotic systems. They allow you to:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Start multiple nodes with a single command"}),"\n",(0,t.jsx)(r.li,{children:"Configure nodes with parameters at launch time"}),"\n",(0,t.jsx)(r.li,{children:"Enable conditional launching based on arguments"}),"\n",(0,t.jsx)(r.li,{children:"Manage parameters in organized YAML files"}),"\n",(0,t.jsx)(r.li,{children:"Dynamically reconfigure parameters during runtime"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Understanding these concepts will help you build more maintainable and configurable robotic applications."})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},8453:(e,r,a)=>{a.d(r,{R:()=>i,x:()=>l});var n=a(6540);const t={},o=n.createContext(t);function i(e){const r=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(o.Provider,{value:r},e.children)}}}]);